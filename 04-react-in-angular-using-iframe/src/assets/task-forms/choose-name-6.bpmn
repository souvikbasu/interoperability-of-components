<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1222bkh" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="2.2.4">
  <bpmn:process id="name_folio" name="Name A Folio" isExecutable="true" camunda:versionTag="0.3.0">
    <bpmn:documentation>This process allows you to choose a name for a new folio.</bpmn:documentation>
    <bpmn:extensionElements>
      <camunda:properties>
        <camunda:property name="Delta.Info.VariableName" value="Folio Code|FormField_folio" />
      </camunda:properties>
    </bpmn:extensionElements>
    <bpmn:startEvent id="startWithFolio">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="FormField_folio" label="Folio" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:outgoing>start_to_pick</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:exclusiveGateway id="Gateway_decision">
      <bpmn:incoming>confirm_to_gateway</bpmn:incoming>
      <bpmn:outgoing>gateway_to_end</bpmn:outgoing>
      <bpmn:outgoing>gateway_to_pick</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="the_end">
      <bpmn:incoming>gateway_to_end</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="start_to_pick" sourceRef="startWithFolio" targetRef="Task_name" />
    <bpmn:sequenceFlow id="pick_to_timer" sourceRef="Task_name" targetRef="WaitTimer" />
    <bpmn:sequenceFlow id="confirm_to_gateway" sourceRef="Task_confirm" targetRef="Gateway_decision" />
    <bpmn:sequenceFlow id="gateway_to_end" name="Yes" sourceRef="Gateway_decision" targetRef="the_end">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${FormField_yesno == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="gateway_to_pick" name="No" sourceRef="Gateway_decision" targetRef="Task_name">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${FormField_yesno == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="Task_name" name="Pick a suitable name" camunda:formKey="wp:chooseName.js" camunda:candidateGroups="ops-it">
      <bpmn:documentation>Pick a name for whatever you need to name.</bpmn:documentation>
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="FormField_name" label="Name" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:properties>
          <camunda:property name="Delta.Info.DataSource.URLVariableName" value="d1|detailsUrl" />
          <camunda:property name="Delta.Info.DataSource.Map" value="d1|Previous Folio Name|[0].Name" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="detailsUrl">https://opsdata.orbis.com/api/fund/details?funds=${FormField_folio}&amp;format=json</camunda:inputParameter>
          <camunda:outputParameter name="chosen_name">${FormField_name}</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>start_to_pick</bpmn:incoming>
      <bpmn:incoming>gateway_to_pick</bpmn:incoming>
      <bpmn:outgoing>pick_to_timer</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Task_confirm" name="Still like it?" camunda:candidateGroups="ops-it">
      <bpmn:documentation>Sometimes after waiting a while, a name for something may not feel as suitable anymore, so we want to check if the name is still something we want to use after an initial waiting period.

I'm sure that you picked the right name in the beginning, but if not, now is the time to change your mind.

Lorem ipsum dolor sit amet, ea vel aliquip delenit vivendum, lorem feugiat ne mea, ea qui nihil adipisci. Nam nonumes inciderint no. Eu sed meis pericula repudiare. In eos verterem democritum, eum delenit scriptorem te. Ea ubique aliquid vim, laudem legendos pertinax ne mel. Te affert iudico perfecto eum, an amet ludus est. At mea illud liber neglegentur, has ignota impetus consequuntur ne.

Oratio tollit signiferumque et quo, ex fabellas sadipscing has. Mei quod delicatissimi et, an postea reformidans his, mei eu velit accusata mediocrem. Ubique dissentiunt eam te, mel in mundi veritus. Sed dicta vidisse intellegebat ut, ferri aperiri admodum sed eu.

Eripuit ornatus id mei, at dicam dolores eos, velit omittam voluptaria no qui. Eum inermis consetetur id. Nisl adipisci erroribus eos at, cu mei minim altera. Et vero percipitur sea, at his falli nulla diceret. Ex vis doming ornatus labores. In clita probatus mel.

Cum duis veritus dolores in, usu dico quidam utroque ei, te eirmod menandri eum. Idque salutatus constituam nec in, et vidit saepe vix. Nam at numquam mediocrem efficiantur. Congue apeirian no mel. Alii ignota inermis ius eu, detracto liberavisse ut eos, at utamur phaedrum sadipscing sit. No dicunt phaedrum ius, ex minim ubique eos, minim bonorum eum no.

Et omnium nonumes est. Vel etiam nusquam ea. Omnis erroribus sit at. Est cu sale partiendo scriptorem. Legere delicata et mea, usu prima epicuri ne. Vix omittam temporibus ei, vix eu salutandi quaerendum sadipscing.</bpmn:documentation>
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="FormField_yesno" label="Keep &#34;${FormField_name}&#34;?" type="boolean" defaultValue="true" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>timer_to_confirm</bpmn:incoming>
      <bpmn:outgoing>confirm_to_gateway</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:intermediateCatchEvent id="WaitTimer" name="Wait 1 minute">
      <bpmn:incoming>pick_to_timer</bpmn:incoming>
      <bpmn:outgoing>timer_to_confirm</bpmn:outgoing>
      <bpmn:timerEventDefinition>
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT1M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="timer_to_confirm" sourceRef="WaitTimer" targetRef="Task_confirm" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="name_folio">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="startWithFolio">
        <dc:Bounds x="173" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0mwb5lg_di" bpmnElement="Gateway_decision" isMarkerVisible="true">
        <dc:Bounds x="762" y="237" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_02pfw05_di" bpmnElement="the_end">
        <dc:Bounds x="1018" y="244" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1dz0vi6_di" bpmnElement="start_to_pick">
        <di:waypoint x="209" y="120" />
        <di:waypoint x="298" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1cns9lc_di" bpmnElement="pick_to_timer">
        <di:waypoint x="398" y="120" />
        <di:waypoint x="531" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0cgar3u_di" bpmnElement="confirm_to_gateway">
        <di:waypoint x="787" y="160" />
        <di:waypoint x="787" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1pu1oph_di" bpmnElement="gateway_to_end">
        <di:waypoint x="812" y="262" />
        <di:waypoint x="1018" y="262" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="906" y="244" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0vtepq3_di" bpmnElement="gateway_to_pick">
        <di:waypoint x="762" y="262" />
        <di:waypoint x="348" y="262" />
        <di:waypoint x="348" y="160" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="548" y="244" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_16v6bnz_di" bpmnElement="Task_name">
        <dc:Bounds x="298" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_05l12yl_di" bpmnElement="Task_confirm">
        <dc:Bounds x="737" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="IntermediateCatchEvent_10w2hfl_di" bpmnElement="WaitTimer">
        <dc:Bounds x="531" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="517" y="145" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1euqo7t_di" bpmnElement="timer_to_confirm">
        <di:waypoint x="567" y="120" />
        <di:waypoint x="737" y="120" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
